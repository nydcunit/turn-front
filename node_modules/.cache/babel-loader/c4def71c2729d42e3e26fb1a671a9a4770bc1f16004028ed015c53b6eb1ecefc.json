{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addNackSupportForOpus = addNackSupportForOpus;\n/**\n * This function adds RTCP NACK support for OPUS codec in given capabilities.\n */\nfunction addNackSupportForOpus(rtpCapabilities) {\n  for (const codec of rtpCapabilities.codecs ?? []) {\n    if ((codec.mimeType.toLowerCase() === 'audio/opus' || codec.mimeType.toLowerCase() === 'audio/multiopus') && !codec.rtcpFeedback?.some(fb => fb.type === 'nack' && !fb.parameter)) {\n      if (!codec.rtcpFeedback) {\n        codec.rtcpFeedback = [];\n      }\n      codec.rtcpFeedback.push({\n        type: 'nack'\n      });\n    }\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","addNackSupportForOpus","rtpCapabilities","codec","codecs","mimeType","toLowerCase","rtcpFeedback","some","fb","type","parameter","push"],"sources":["/Users/user/turn/turn-front/node_modules/mediasoup-client/lib/handlers/ortc/utils.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addNackSupportForOpus = addNackSupportForOpus;\n/**\n * This function adds RTCP NACK support for OPUS codec in given capabilities.\n */\nfunction addNackSupportForOpus(rtpCapabilities) {\n    for (const codec of rtpCapabilities.codecs ?? []) {\n        if ((codec.mimeType.toLowerCase() === 'audio/opus' ||\n            codec.mimeType.toLowerCase() === 'audio/multiopus') &&\n            !codec.rtcpFeedback?.some(fb => fb.type === 'nack' && !fb.parameter)) {\n            if (!codec.rtcpFeedback) {\n                codec.rtcpFeedback = [];\n            }\n            codec.rtcpFeedback.push({ type: 'nack' });\n        }\n    }\n}\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,qBAAqB,GAAGA,qBAAqB;AACrD;AACA;AACA;AACA,SAASA,qBAAqBA,CAACC,eAAe,EAAE;EAC5C,KAAK,MAAMC,KAAK,IAAID,eAAe,CAACE,MAAM,IAAI,EAAE,EAAE;IAC9C,IAAI,CAACD,KAAK,CAACE,QAAQ,CAACC,WAAW,CAAC,CAAC,KAAK,YAAY,IAC9CH,KAAK,CAACE,QAAQ,CAACC,WAAW,CAAC,CAAC,KAAK,iBAAiB,KAClD,CAACH,KAAK,CAACI,YAAY,EAAEC,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACC,IAAI,KAAK,MAAM,IAAI,CAACD,EAAE,CAACE,SAAS,CAAC,EAAE;MACtE,IAAI,CAACR,KAAK,CAACI,YAAY,EAAE;QACrBJ,KAAK,CAACI,YAAY,GAAG,EAAE;MAC3B;MACAJ,KAAK,CAACI,YAAY,CAACK,IAAI,CAAC;QAAEF,IAAI,EAAE;MAAO,CAAC,CAAC;IAC7C;EACJ;AACJ","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}